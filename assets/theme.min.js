(()=>{"use strict";(()=>{var t="data-section-id";function e(e,n){this.container=function(e){if(!(e instanceof Element))throw new TypeError("Theme Sections: Attempted to load section. The section container provided is not a DOM element.");if(null===e.getAttribute(t))throw new Error("Theme Sections: The section container provided does not have an id assigned to the "+t+" attribute.");return e}(e),this.id=e.getAttribute(t),this.extensions=[],Object.assign(this,function(t){if(void 0!==t&&"object"!=typeof t||null===t)throw new TypeError("Theme Sections: The properties object provided is not a valid");return t}(n)),this.onLoad()}e.prototype={onLoad:Function.prototype,onUnload:Function.prototype,onSelect:Function.prototype,onDeselect:Function.prototype,onBlockSelect:Function.prototype,onBlockDeselect:Function.prototype,extend:function(t){this.extensions.push(t);var e=Object.assign({},t);delete e.init,Object.assign(this,e),"function"==typeof t.init&&t.init.apply(this)}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},writable:!0,configurable:!0});var n="data-section-type",i="data-section-id";window.Shopify=window.Shopify||{},window.Shopify.theme=window.Shopify.theme||{},window.Shopify.theme.sections=window.Shopify.theme.sections||{};var r=window.Shopify.theme.sections.registered=window.Shopify.theme.sections.registered||{},o=window.Shopify.theme.sections.instances=window.Shopify.theme.sections.instances||[];function s(t,n){if("string"!=typeof t)throw new TypeError("Theme Sections: The first argument for .register must be a string that specifies the type of the section being registered");if(void 0!==r[t])throw new Error('Theme Sections: A section of type "'+t+'" has already been registered. You cannot register the same section type twice');function i(t){e.call(this,t,n)}return i.constructor=e,i.prototype=Object.create(e.prototype),i.prototype.type=t,r[t]=i}function a(t,e){t=d(t),void 0===e&&(e=document.querySelectorAll("["+n+"]")),e=u(e),t.forEach((function(t){var i=r[t];void 0!==i&&(e=e.filter((function(e){return!(c(e).length>0||null===e.getAttribute(n)||e.getAttribute(n)===t&&(o.push(new i(e)),1))})))}))}function c(t){var e=[];if(NodeList.prototype.isPrototypeOf(t)||Array.isArray(t))var n=t[0];return t instanceof Element||n instanceof Element?u(t).forEach((function(t){e=e.concat(o.filter((function(e){return e.container===t})))})):"string"!=typeof t&&"string"!=typeof n||d(t).forEach((function(t){e=e.concat(o.filter((function(e){return e.type===t})))})),e}function h(t){for(var e,n=0;n<o.length;n++)if(o[n].id===t){e=o[n];break}return e}function d(t){return"*"===t?t=Object.keys(r):"string"==typeof t?t=[t]:t.constructor===e?t=[t.prototype.type]:Array.isArray(t)&&t[0].constructor===e&&(t=t.map((function(t){return t.prototype.type}))),t.map((function(t){return t.toLowerCase()}))}function u(t){return NodeList.prototype.isPrototypeOf(t)&&t.length>0?t=Array.prototype.slice.call(t):NodeList.prototype.isPrototypeOf(t)&&0===t.length||null===t?t=[]:!Array.isArray(t)&&t instanceof Element&&(t=[t]),t}window.Shopify.designMode&&(document.addEventListener("shopify:section:load",(function(t){var e=t.detail.sectionId,r=t.target.querySelector("["+i+'="'+e+'"]');null!==r&&a(r.getAttribute(n),r)})),document.addEventListener("shopify:section:unload",(function(t){var e=t.detail.sectionId,n=t.target.querySelector("["+i+'="'+e+'"]');"object"==typeof c(n)[0]&&c(n).forEach((function(t){var e=o.map((function(t){return t.id})).indexOf(t.id);o.splice(e,1),t.onUnload()}))})),document.addEventListener("shopify:section:select",(function(t){var e=h(t.detail.sectionId);"object"==typeof e&&e.onSelect(t)})),document.addEventListener("shopify:section:deselect",(function(t){var e=h(t.detail.sectionId);"object"==typeof e&&e.onDeselect(t)})),document.addEventListener("shopify:block:select",(function(t){var e=h(t.detail.sectionId);"object"==typeof e&&e.onBlockSelect(t)})),document.addEventListener("shopify:block:deselect",(function(t){var e=h(t.detail.sectionId);"object"==typeof e&&e.onBlockDeselect(t)})));class l{constructor(t){this.details=t,this.summary=this.details.querySelector("[data-summary]"),this.eventTarget=new EventTarget,this.createAnimation(),this.details.open=!1,this.initEvents()}dispatchEvent(t,e){this.eventTarget.dispatchEvent(new CustomEvent(t,{detail:e}))}addEventListener(t,e){this.eventTarget.addEventListener(t,e)}removeEventListener(t,e){this.eventTarget.removeEventListener(t,e)}createAnimation(){this.content=this.details.querySelector("[data-details-collapse]");const t=document.defaultView.getComputedStyle(this.content),e=[{height:0,padding:0,opacity:0},{height:t.getPropertyValue("height"),padding:t.getPropertyValue("padding"),opacity:1}],n=new KeyframeEffect(this.content,e,{duration:400,easing:"ease-in"});this.animation=new Animation(n)}updateAnimationHeight(){const t=this.animation.effect.getKeyframes();t[1].height=document.defaultView.getComputedStyle(this.content).getPropertyValue("height"),this.animation.effect.setKeyframes(t)}expand(){this.details.open=!0,this.animation.play()}collapse(){this.animation.reverse(),this.animation.finished.then((()=>{this.animation.reverse(),this.animation.pause(),this.details.open=!1}))}toggleAction(){"running"!==this.animation.playState&&(this.updateAnimationHeight(),this.details.open?(this.collapse(),this.dispatchEvent("toggle:closed")):(this.expand(),this.dispatchEvent("toggle:opened",{target:this})))}initEvents(){this.summary.addEventListener("click",(t=>{t.preventDefault(),this.toggleAction()}))}}class p{constructor(t){this.toggles=Array.from(t.querySelectorAll("[data-details]"),(t=>{const e=new l(t);return this.initEvents(e),e}))}refresh(t){this.activeToggleIndex>=0&&this.toggles[this.activeToggleIndex].collapse(),this.activeToggleIndex=this.toggles.indexOf(t.detail.target)}resetActiveToggleIndex(){this.activeToggleIndex=-1}initEvents(t){t.addEventListener("toggle:opened",this.refresh.bind(this)),t.addEventListener("toggle:closed",this.resetActiveToggleIndex.bind(this))}destroyEvents(){this.toggles.forEach((t=>{t.removeEventListener("toggle:opened",this.refresh.bind(this)),t.removeEventListener("toggle:closed",this.resetActiveToggleIndex.bind(this))}))}}function m(){this.entries=[]}function f(t){if("object"!=typeof t)throw new TypeError(t+" is not an object.");if(0===Object.keys(t).length&&t.constructor===Object)throw new Error(t+" is empty.")}m.prototype.add=function(t,e,n){this.entries.push({element:t,event:e,fn:n}),t.addEventListener(e,n)},m.prototype.removeAll=function(){this.entries=this.entries.filter((function(t){return t.element.removeEventListener(t.event,t.fn),!1}))};function v(t,e,n){this.element=t,this.product=function(t){if("object"!=typeof t)throw new TypeError(t+" is not an object.");if(void 0===t.variants[0].options)throw new TypeError("Product object is invalid. Make sure you use the product object that is output from {{ product | json }} or from the http://[your-product-url].js route");return t}(e),n=n||{},this._listeners=new m,this._listeners.add(this.element,"submit",this._onSubmit.bind(this,n)),this.optionInputs=this._initInputs('[name^="options"]',n.onOptionChange),this.quantityInputs=this._initInputs('[name="quantity"]',n.onQuantityChange),this.propertyInputs=this._initInputs('[name^="properties"]',n.onPropertyChange)}v.prototype.destroy=function(){this._listeners.removeAll()},v.prototype.options=function(){return t=this.optionInputs,e=function(t){return t.name=/(?:^(options\[))(.*?)(?:\])/.exec(t.name)[2],t},t.reduce((function(t,n){return(n.checked||"radio"!==n.type&&"checkbox"!==n.type)&&t.push(e({name:n.name,value:n.value})),t}),[]);var t,e},v.prototype.variant=function(){return function(t,e){f(t);var n=function(t,e){f(t),function(t){if(!Array.isArray(t))throw new TypeError(t+" is not an array.");if(0===t.length)return[];if(!t[0].hasOwnProperty("name"))throw new Error(t[0]+"does not contain name key.");if("string"!=typeof t[0].name)throw new TypeError("Invalid value type passed for name of option "+t[0].name+". Value should be string.")}(e);var n=[];return e.forEach((function(e){for(var i=0;i<t.options.length;i++)if(t.options[i].name.toLowerCase()===e.name.toLowerCase()){n[i]=e.value;break}})),n}(t,e);return function(t,e){return f(t),function(t){if(Array.isArray(t)&&"object"==typeof t[0])throw new Error(t+"is not a valid array of options.")}(e),t.variants.filter((function(t){return e.every((function(e,n){return t.options[n]===e}))}))[0]||null}(t,n)}(this.product,this.options())},v.prototype.properties=function(){var t,e,n=(t=this.propertyInputs,e=function(t){return/(?:^(properties\[))(.*?)(?:\])/.exec(t)[2]},t.reduce((function(t,n){return(n.checked||"radio"!==n.type&&"checkbox"!==n.type)&&(t[e(n.name)]=n.value),t}),{}));return 0===Object.entries(n).length?null:n},v.prototype.quantity=function(){return this.quantityInputs[0]?Number.parseInt(this.quantityInputs[0].value,10):1},v.prototype._setIdInputValue=function(t){var e=this.element.querySelector('[name="id"]');e||((e=document.createElement("input")).type="hidden",e.name="id",this.element.appendChild(e)),e.value=t.toString()},v.prototype._onSubmit=function(t,e){e.dataset=this._getProductFormEventData(),e.dataset.variant&&this._setIdInputValue(e.dataset.variant.id),t.onFormSubmit&&t.onFormSubmit(e)},v.prototype._onFormEvent=function(t){return void 0===t?Function.prototype:function(e){e.dataset=this._getProductFormEventData(),t(e)}.bind(this)},v.prototype._initInputs=function(t,e){return Array.prototype.slice.call(this.element.querySelectorAll(t)).map(function(t){return this._listeners.add(t,"change",this._onFormEvent(e)),t}.bind(this))},v.prototype._getProductFormEventData=function(){return{options:this.options(),variant:this.variant(),properties:this.properties(),quantity:this.quantity()}};class y{constructor(t){this.container=t,this.form=this.container.querySelector("[data-form]"),this.createProductForm()}createProductForm(){const t=this.container.dataset.handle;fetch(`/products/${t}.js`).then((t=>t.json())).then((t=>{t.available?this.productForm=new v(this.form,t,{onOptionChange:this.optionChange.bind(this),onFormSubmit:this.submit.bind(this)}):this.changeButtons(t)}))}destroyProductForm(){this.productForm&&this.productForm.destroy()}optionChange(){this.variant=event.dataset.variant,this.changeButtons(this.variant),this.variant&&(this.changeVariantUrl(),this.dispatchPriceChange(),this.dispatchQuantityChange(),this.renderOptionName("[data-colors]"))}changeButtons(t){const e=[this.form.querySelector("[data-button-add]"),this.form.querySelector("[data-button-buy]")];e.forEach((n=>{t?t&&!t.available?(n.setAttribute("disabled","disabled"),n.innerHTML=soldOut):t&&t.available&&n.disabled&&(n.removeAttribute("aria-live","polite"),n.removeAttribute("disabled"),n.innerHTML=n.value):(n.setAttribute("disabled","disabled"),n.innerHTML=unavailable),e[0].setAttribute("aria-live","polite")}))}changeVariantUrl(){const t=function(t,e){return/variant=/.test(t)?t.replace(/(variant=)[^&]+/,"$1"+e):/\?/.test(t)?t.concat("&variant=").concat(e):t.concat("?variant=").concat(e)}(window.location.href,this.variant.id);window.history.replaceState({path:t},"",t)}dispatchPriceChange(){const t=function(t,e){"string"==typeof t&&(t=t.replace(".",""));let n="";const i=/\{\{\s*(\w+)\s*\}\}/,r=e||"${{amount}}";function o(t,e=2,n=",",i="."){if(isNaN(t)||null==t)return 0;const r=(t=(t/100).toFixed(e)).split(".");return r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,`$1${n}`)+(r[1]?i+r[1]:"")}switch(r.match(i)[1]){case"amount":n=o(t,2);break;case"amount_no_decimals":n=o(t,0);break;case"amount_with_comma_separator":n=o(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=o(t,0,".",",")}return r.replace(i,n)}(this.variant.price,moneyFormat),e=new CustomEvent("price:changed",{detail:{price:t},bubbles:!0});this.form.dispatchEvent(e)}dispatchQuantityChange(){const t=new CustomEvent("quantity:changed",{detail:{quantity:window.variants_inventory[this.variant.id]},bubbles:!0});this.form.dispatchEvent(t)}renderOptionName(t){const e=this.form.querySelector(t);if(!e)return;const n=e.querySelector(":checked");this.form.querySelector("[data-color-name]").innerHTML=n.value}submit(t){t.preventDefault(),fetch(`${t.target.action}.js`,{method:t.target.method,body:new FormData(t.target),headers:{"X-Requested-With":"XMLHttpRequest"}}).then((t=>t.json())).then((e=>{e.status?this.renderError(e):(this.deleteError(),"Buy it now"==t.submitter.value&&(location.href=`https://andrush-yu.myshopify.com/cart/${e.variant_id}:${e.quantity}`),this.dispatchCartChange(e))})).catch(console.error)}renderError(t){this.deleteError(),this.error||(this.error=document.createElement("span"),this.error.classList.add("form__error"),this.error.setAttribute("id","form-error"),this.error.setAttribute("role","alert"),this.numberInput=this.form.querySelector("[data-input]"),this.numberInput.setAttribute("aria-describedby","form-error")),this.error.innerHTML=t.description,this.form.appendChild(this.error),this.numberInput.setAttribute("aria-invalid","true")}deleteError(){this.form.querySelector(".form__error")&&(this.error.remove(),this.numberInput.setAttribute("aria-invalid","false"))}dispatchCartChange(t){const e=new CustomEvent("cart:added",{detail:{header:t.sections["alternate-header"]},bubbles:!0});this.form.dispatchEvent(e)}}class g{constructor(t){this.priceElelement=t,this.initEvents()}updatePrice(t){const e=t.detail.price;e!==this.priceElelement.innerHTML&&(this.priceElelement.innerHTML=e)}initEvents(){document.addEventListener("price:changed",this.updatePrice.bind(this))}destroyEvents(){document.removeEventListener("price:changed",this.updatePrice.bind(this))}}class E{constructor(t=null,e=1,n=-1/0,i=1/0){this.value=t,this.step=e,this.min=n,this.max=i,this.eventTarget=new EventTarget}dispatchEvent(t){this.eventTarget.dispatchEvent(new Event(t))}addEventListener(t,e){this.eventTarget.addEventListener(t,e)}removeEventListener(t,e){this.eventTarget.removeEventListener(t,e)}getValue(){return this.value}clamp(t){return Math.min(Math.max(this.min,t),this.max)}setClampedValue(t){this.value=this.clamp(t),this.dispatchEvent("value:changed")}increase(){this.setClampedValue(this.value+this.step)}decrease(){this.setClampedValue(this.value-this.step)}}class b{constructor(t,e=null,n=1,i=-1/0,r=1/0){this.counter=new E(e,n,i,r),this.step=n,this.min=i,this.max=r,this.element=t,this.inputElement=this.element.querySelector("[data-input]"),this.decreaseElement=this.element.querySelector("[data-decrease]"),this.increaseElement=this.element.querySelector("[data-increase]"),this.initInput(),this.initEvents()}render(){const t=this.counter.getValue();this.inputElement.value=t,this.decreaseElement.disabled=t==this.min,this.increaseElement.disabled=t==this.max}initInput(){this.inputElement.step=this.step,this.inputElement.max=this.max,this.inputElement.min=this.min,this.render()}updateMax(t){const e=t.detail.quantity;e<0||(this.max=e,this.inputElement.max=this.max,this.counter.max=e,this.counter.setClampedValue(this.counter.value))}initEvents(){this.inputElement.addEventListener("change",(t=>{this.counter.setClampedValue(t.target.value)})),this.increaseElement.addEventListener("click",this.counter.increase.bind(this.counter)),this.decreaseElement.addEventListener("click",this.counter.decrease.bind(this.counter)),this.counter.addEventListener("value:changed",this.render.bind(this)),document.addEventListener("quantity:changed",this.updateMax.bind(this))}destroyEvents(){this.counter.removeEventListener("value:changed",this.render.bind(this)),document.removeEventListener("quantity:changed",this.updateMax.bind(this))}}s("alternate-main-product",{onLoad(){this.form=new y(this.container),this.productPrice=new g(this.container.querySelector("[data-price]")),this.counterInput=new b(this.container.querySelector("[data-counter]"),1,1,1,11),this.accordion=new p(this.container.querySelector("[data-accordion]"))},onUnload(){this.form.destroyProductForm(),this.productPrice.destroyEvents(),this.accordion.destroyEvents(),this.counterInput.destroyEvents()},onBlockSelect(t){const e=t.target.querySelector("[data-details]");this.accordion.toggles.find((t=>t.details===e)).toggleAction()}});class w{constructor(t){this.cart=t,this.initEvents()}updateCart(t){const e=t.detail.header,n=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-cart-counter]").innerHTML;this.cart.innerHTML=n}initEvents(){document.addEventListener("cart:added",this.updateCart.bind(this))}destroyEvents(){document.removeEventListener("cart:added",this.updateCart.bind(this))}}s("alternate-header",{onLoad(){this.cart=new w(this.container.querySelector("[data-cart-counter]"))},onUnload(){this.cart.destroyEvents()}}),document.addEventListener("DOMContentLoaded",(()=>a("*")))})()})();